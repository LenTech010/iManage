<!--
SPDX-FileCopyrightText: 2024-present Tobias Kunze
SPDX-License-Identifier: AGPL-3.0-only WITH LicenseRef-Imanage-AGPL-3.0-Terms
-->

{% load i18n %}
{% load rules %}
<div class="dashboard-block-wrapper">
    {% has_perm "event.orga_access_event" request.user event as can_access_orga %}
    {% if can_access_orga %}
        <a class="dashboard-block dashboard-block-extended" href="{{ event.orga_urls.base }}">
    {% else %}
        <a class="dashboard-block dashboard-block-extended" href="{{ event.urls.user_submissions.full }}">
    {% endif %}
        <h2 class="name">{{ event.name }}</h2>
        <div class="dashboard-description">
            <div class="date">{{ event.get_date_range_display }}</div>
        </div>
    </a>
    <div class="dashboard-block-extension">
        {% if can_access_orga %}
            <a href="{{ event.orga_urls.submissions }}" class="dashboard-block-addon dashboard-block-addon-{% if event.submission_count %}info{% else %}secondary{% endif %}">
        {% else %}
            <a href="{{ event.urls.user_submissions.full }}" class="dashboard-block-addon dashboard-block-addon-{% if event.submission_count %}info{% else %}secondary{% endif %}">
        {% endif %}
            {% if event.submission_count %}
                {{ event.submission_count }}
                {% blocktranslate trimmed count count=event.submission_count %}
                    proposal
                {% plural %}
                    proposals
                {% endblocktranslate %}
            {% else %}
                {% translate "No proposals yet" %}
            {% endif %}
        </a>
        {% if can_access_orga %}
            <a href="{{ event.orga_urls.base }}" class="dashboard-block-addon dashboard-block-addon-{% if event.is_public %}success{% else %}secondary{% endif %}">
        {% else %}
            <a href="{{ event.urls.base.full }}" class="dashboard-block-addon dashboard-block-addon-{% if event.is_public %}success{% else %}secondary{% endif %}">
        {% endif %}
            {% if event.is_public %}
                <div class="state active">{% translate "live" %}</div>
            {% else %}
                <div class="state inactive">{% translate "Not public" %}</div>
            {% endif %}
        </a>
    </div>
</div>
